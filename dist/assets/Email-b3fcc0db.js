import{s as b,t as a,d as q,a as C,i as u,c as r,M as $,S as k,l as S,_ as A,u as V,b as Z,e as y,f as B,g as P,E as T,F as H,m as I,h as x,j as _,k as g,n as L}from"./index-680040c2.js";const R=a('<svg viewBox="0 0 24 24"width=1.2em height=1.2em><path fill=currentColor d="M5 21q-.825 0-1.413-.588T3 19V5q0-.825.588-1.413T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.588 1.413T19 21H5Zm0-2h14V5H5v14Zm1-2h12l-3.75-5l-3 4L9 13l-3 4Zm-1 2V5v14Z">'),F=(e={})=>(()=>{const n=R();return b(n,e,!0,!0),n})(),j=a('<svg viewBox="0 0 24 24"width=1.2em height=1.2em><path fill=currentColor d="M6 22q-.825 0-1.413-.588T4 20V4q0-.825.588-1.413T6 2h9l5 5v13q0 .825-.588 1.413T18 22H6Zm0-2h12V8h-4V4H6v16Zm6-1q1.675 0 2.838-1.175T16 15v-4h-2v4q0 .825-.575 1.413T12 17q-.825 0-1.413-.588T10 15V9.5q0-.225.15-.363T10.5 9q.225 0 .363.138T11 9.5V15h2V9.5q0-1.05-.725-1.775T10.5 7q-1.05 0-1.775.725T8 9.5V15q0 1.65 1.175 2.825T12 19ZM6 4v4v-4v16V4Z">'),D=(e={})=>(()=>{const n=j();return b(n,e,!0,!0),n})(),O=a('<svg viewBox="0 0 24 24"width=1.2em height=1.2em><path fill=currentColor d="M9 12.5h1v-2h1q.425 0 .713-.288T12 9.5v-1q0-.425-.288-.713T11 7.5H9v5Zm1-3v-1h1v1h-1Zm3 3h2q.425 0 .713-.288T16 11.5v-3q0-.425-.288-.713T15 7.5h-2v5Zm1-1v-3h1v3h-1Zm3 1h1v-2h1v-1h-1v-1h1v-1h-2v5ZM8 18q-.825 0-1.413-.588T6 16V4q0-.825.588-1.413T8 2h12q.825 0 1.413.588T22 4v12q0 .825-.588 1.413T20 18H8Zm0-2h12V4H8v12Zm-4 6q-.825 0-1.413-.588T2 20V6h2v14h14v2H4ZM8 4v12V4Z">'),W=(e={})=>(()=>{const n=O();return b(n,e,!0,!0),n})(),G=a("<button p-4 w=180px><div truncate>"),J=e=>e==="application/pdf"||e==="application/x-pdf"||e==="application/x-bzpdf",K=e=>e.startsWith("image/");function N({contentType:e,filename:n,onclick:s}){const l={height:"30px",width:"30px"};return(()=>{const t=G(),i=t.firstChild;return C(t,"click",s,!0),u(t,r(k,{get fallback(){return r(D,{style:l})},get children(){return[r($,{get when(){return K(e)},get children(){return r(F,{style:l})}}),r($,{get when(){return J(e)},get children(){return r(W,{style:l})}})]}}),i),u(i,n),t})()}q(["click"]);const z=a("<div>"),Q=a("<div bg-zinc-900><div flex justify-between items-center p-4 border-0 border-b border-b-solid border-zinc-800><h2 font-bold m-0></h2><div><button border border-zinc-400>Delete</button></div></div><div border-0 border-b border-b-solid border-zinc-800 p-4 flex flex-wrap>"),U=a("<span mr-3>: "),X=a("<div border-0 border-b border-b-solid border-zinc-800 p-4><p m-0 text-zinc-500>Attachments:</p><div flex flex-wrap gap-2 mt-1>"),Y=a("<div p-4>"),E=a("<pre>"),ee=a("<div flex gap-1><button>Preview</button><button>Plain text</button><button>HTML"),te=a("<p text-zinc-500>This email does not have a plain text fallback 😞"),ne=a("<p italic text-zinc-500>"),re=S(()=>A(()=>import("./Code-c55f5a76.js"),["assets/Code-c55f5a76.js","assets/index-680040c2.js","assets/index-1fc7e900.css","assets/Code-313b7763.css"]).then(e=>({default:e.Code})));function ae({}){const[e]=V(Z),[n,s]=y(),l=async t=>{s(void 0);const i=await L(`/api/emails/${t}/remainder`),o=await i.json();if(i.status!==200)throw o.error;s(o)};return B(()=>{const t=e();t&&l(t.id)}),(()=>{const t=z();return u(t,r(ie,{email:()=>e(),emailRemainder:n}),null),u(t,r(le,{email:()=>e(),emailRemainder:n}),null),u(t,r(ce,{emailRemainder:n}),null),t})()}function ie({email:e,emailRemainder:n}){const[s,l]=V(Z),t=P(()=>{const i=e(),o=[],c=(v,m)=>{m&&m.length>0&&o.push({name:v,value:m.map(h=>r(T,{address:()=>h}))})};i.sender&&o.push({name:"Sender",value:[r(T,{address:()=>i.sender})]}),c("From",i.from),c("To",i.to);const d=n();return d&&(c("ReplyTo",d.replyTo),c("CC",d.cc),c("BCC",d.bcc)),o});return(()=>{const i=Q(),o=i.firstChild,c=o.firstChild,d=c.nextSibling,v=d.firstChild,m=o.nextSibling;return u(c,()=>e().subject),C(v,"click",l.delete,!0),u(m,r(H,{get each(){return t()},children:h=>(()=>{const p=U(),f=p.firstChild;return u(p,()=>h.name,f),u(p,()=>h.value,null),p})()})),i})()}function le({emailRemainder:e,email:n}){const s=(t,i)=>{const o=document.createElement("a");o.download=t,o.href="http://localhost:3000/api/emails/"+n().id+"/attachments/"+i,o.click()},l=()=>{var t,i;return(((i=(t=e())==null?void 0:t.attachments)==null?void 0:i.length)??0)>0};return r(x,{get when(){return l()},get children(){const t=X(),i=t.firstChild,o=i.nextSibling;return u(o,r(H,{get each(){return e().attachments},children:(c,d)=>r(N,I(c,{onclick:()=>s(c.filename,d())}))})),t}})}function ce({emailRemainder:e}){const n=()=>{var l;return((l=e())==null?void 0:l.htmlBody)||null},s=()=>{var l;return((l=e())==null?void 0:l.textBody)??""};return(()=>{const l=Y();return u(l,r(x,{get when(){return n()},get fallback(){return[(()=>{const t=E();return _(()=>t.innerText=s()),t})(),r(M,{kind:"text/plain"})]},children:t=>r(oe,{html:t,plain:s})})),l})()}function oe({html:e,plain:n}){const[s,l]=y("preview"),t=()=>s()==="preview",i=()=>s()==="plain",o=()=>s()==="html";return[(()=>{const c=ee(),d=c.firstChild,v=d.nextSibling,m=v.nextSibling;return d.$$click=()=>l("preview"),v.$$click=()=>l("plain"),m.$$click=()=>l("html"),_(h=>{const p=t()?"indigo-400":"zinc-200",f=i()?"indigo-400":"zinc-200",w=o()?"indigo-400":"zinc-200";return p!==h._v$&&g(d,"text",h._v$=p),f!==h._v$2&&g(v,"text",h._v$2=f),w!==h._v$3&&g(m,"text",h._v$3=w),h},{_v$:void 0,_v$2:void 0,_v$3:void 0}),c})(),r(k,{get children(){return[r($,{get when(){return t()},get children(){return[(()=>{const c=z();return _(()=>c.innerHTML=e()),c})(),r(M,{kind:"text/html"})]}}),r($,{get when(){return i()},get children(){return r(x,{get when(){return n()},get fallback(){return te()},get children(){const c=E();return _(()=>c.innerText=n()),c}})}}),r($,{get when(){return o()},get children(){return r(re,{lang:"xml",code:e})}})]}})]}function M({kind:e}){return(()=>{const n=ne();return u(n,e),n})()}q(["click"]);export{ae as Email};
